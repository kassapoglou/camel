<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Δωρεάν Μαθήματα Apache Camel</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
		  content="Μια ολοκληρωμένη σειρά δωρεάν μαθημάτων και on-line σεμιναρίων σε Apache Camel">
	<meta name="robots" content="index, follow">
	<meta name="keywords" content="Apache Camel, Enterprise Integration Patterns,
              δωρεάν,
               προγραμματισμός, δωρεάν μαθήματα, δωρεάν σεμινάρια, μαθήματα Apache Camel, σεμινάρια Apache Camel" />
	<meta name="author" content="Michail Kassapoglou" />

	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content="" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="" />
	<meta property="og:site_name" content="" />
	<meta property="og:description" content="" />
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,800" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">

	<!-- Flaticons  -->
	<link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150900548-1"></script>
	<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=sunburst"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-150900548-1');
	</script>
</head>
<body>

	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="upper-menu">
				<div class="container">
					<div class="row">
						<div class="col-xs-4">
							<p>Welcome to Kassapoglou</p>
						</div>
						<!--<div class="col-xs-6 col-md-push-2 text-right">
							<p>
								<ul class="colorlib-social-icons">
									<li><a href="#"><i class="icon-twitter"></i></a></li>
									<li><a href="#"><i class="icon-facebook"></i></a></li>
									<li><a href="#"><i class="icon-linkedin"></i></a></li>
									<li><a href="#"><i class="icon-dribbble"></i></a></li>
								</ul>
							</p>
							<p class="btn-apply"><a href="#">Apply Now</a></p>
						</div> -->
					</div>
				</div>
			</div>
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-md-2">
							<div id="colorlib-logo"><a
									href="https://kassapoglou.github.io/main/index.html">Kassapoglou</a></div>
						</div>
						<div class="col-md-10 text-right menu-1">
							<ul>
								<li><a href="https://kassapoglou.github.io/main/index.html">Home</a></li>
								<li class="has-dropdown active">
									<a href="https://kassapoglou.github.io/main/courses.html">Courses</a>
									<ul class="dropdown">
										<li><a href="https://kassapoglou.github.io/java/java-programming.html">Java</a>
										</li>
										<li><a
												href="https://kassapoglou.github.io/python/python-programming.html">Python</a>
										</li>
										<li><a href="https://kassapoglou.github.io/go/go-programming.html">GO</a></li>
										<li><a
												href="https://kassapoglou.github.io/javascript/javascript-programming.html">JavaScript</a>
										</li>
										<li><a href="https://kassapoglou.github.io/maven/learning-maven.html">Apache
												Maven</a></li>
										<li><a href="https://kassapoglou.github.io/camel/apache-camel-programming.html">Apache
												Camel</a></li>
									</ul>
								</li>
								<!--<li><a href="about.html">About</a></li>-->
								<!--	<li><a href="event.html">Events</a></li>
								<li><a href="news.html">News</a></li> -->
								<li><a href="https://kassapoglou.github.io/main/contact.html">Contact</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</nav>
		<aside id="colorlib-hero">
			<div class="flexslider">
				<ul class="slides">
					<li style="background-image: url(images/A_Camel3.jpeg);">
						<div class="overlay"></div>
						<div class="container-fluid">
							<div class="row">
								<div class="col-md-6 col-sm-12 col-md-offset-3 slider-text">
									<div class="slider-text-inner text-center">
										<h1><STRONG>ΜΑΘΑΙΝΩ ΔΩΡΕΑΝ APACHE CAMEL</STRONG></h1>
										<h2><strong>ΕΝΟΤΗΤΑ 2 - SENDING MESSAGES TO A BROKER</strong></h2>
										<h2><strong><span><a href="https://kassapoglou.github.io/main/index.html">Home</a> | <a
													href="https://kassapoglou.github.io/main/courses.html">Courses</a> |
											<a href="https://kassapoglou.github.io/camel/apache-camel-programming.html">APACHE CAMEL PROGRAMMING</a></span></strong></h2>
									</div>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</aside>

		<div class="colorlib-classes">
			<div class="container">
				<div class="row">
					<div class="col-12 col-lg-12">
						<div class="row row-pb-lg">
							<div class="col-md-12 animate-box">
								<div class="classes class-single">
									<div class="classes-img" style="background-image: url(images/A_Camel5.jpeg);">
										<span class="price text-center"><small>FREE</small></span>
									</div>
									<div class="desc desc2">
										<h3 align="center"><a
												href="https://kassapoglou.github.io/java/java-programming.html">ΕΝΟΤΗΤΑ 2 APACHE CAMEL - SENDING MESSAGES TO A BROKER</a></h3>
												<center>
													<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
														<input type="hidden" name="cmd" value="_s-xclick" />
														<input type="hidden" name="hosted_button_id" value="GQD77W6K672RA" />
														<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit"
															title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
														<img alt="" border="0" src="https://www.paypal.com/en_GR/i/scr/pixel.gif" width="1" height="1" />
													</form>
												</center>


<p>Στο σημερινό δωρεάν μάθημα Apache Camel θα δούμε πως μπορούμε να στέλνουμε μηνύματα σε ένα broker. Πριν δούμε όμως τα
βήματα δημιουργίας ενός τέτοιου project θα πρέπει πρώτα να εξηγήσουμε τι είναι ένα message, ποιος είναι ο ρόλος του
CamelContext, και πως χρησιμοποιούμε το δύο components Sjms και direct. Ας ξεκινήσουμε λοιπόν.</p>

<p>Τα μηνύματα είναι οι οντότητες που χρησιμοποιούνται από τα συστήματα για να επικοινωνούν μεταξύ τους δια μέσω καναλιών
επικοινωνίας. Τα μηνύματα ρέουν προς μια κατεύθυνση – από έναν αποστολέα σε έναν παραλήπτη.</p>

<img src="apache-camel-unit2/apache-camel-unit2-1.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Τα μηνύματα περιέχουν body (payload), headers, και optional attachments/properties.</p>

<img src="apache-camel-unit2/apache-camel-unit2-2.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p><strong>Headers and Attachment</strong> – Τα headers είναι τιμές που σχετίζονται με το μήνυμα όπως αναγνωριστικά αποστολέα, κωδικοποίηση
περιεχομένου, πληροφορίες ελέγχου ταυτότητας και ούτω καθεξής. Τα headers ορίζονται από το ζεύγος όνομα-τιμή. Το όνομα
είναι μια μοναδική σειρά από χαρακτήρες και σύμβολα χωρίς διάκριση πεζών-κεφαλαίων ενώ η τιμή είναι τύπου
java.lang.Object. Δεν υπάρχει περιορισμός στο μέγεθος των headers ούτε στο αριθμό των headers που περιλαμβάνονται σε ένα
μήνυμα. Τέλος, τα headers αποθηκεύονται σαν map structures μέσα στο μήνυμα. Επίσης τα μηνύματα μπορεί να περιέχουν και
συνημμένες πληροφορίες. Αυτά είναι προαιρετικά συνημμένα τα οποία χρησιμοποιούνται συνήθως για web services και για
emails.</p>

<p><strong>Body</strong> – Το κύριο μέρος του μηνύματος, αυτό που βασικά περιέχει την πληροφορία που θέλουμε να μεταφέρουμε, είναι είδος
java.lang.Object. Αυτό μας δίνει την δυνατότητα να αποθηκεύουμε οποιοδήποτε μέγεθος και είδος περιεχομένου. Είναι ευθύνη
του receiver και του software engineer να κατανοήσει το μήνυμα που λαμβάνει. Όμως, χρησιμοποιώντας το Camel, έχουμε
αποκτήσει ένα σημαντικό πλεονέκτημα όσο αφορά την μορφή (format) των μηνυμάτων. Το Camel περιέχει μηχανισμούς για την
μετατροπή των δεδομένων σε αποδεκτή μορφή που σε πολλές περιπτώσεις η μετατροπή συμβαίνει αυτόματα.</p>

<p><strong>Fault Flag</strong> – Τα μηνύματα περιλαμβάνουν επίσης ένα fault flag σε περίπτωση που το μήνυμα μας είτε γιατί δεν στάλθηκε
σωστά είτε γιατί δεν το λάβαμε σωστά. Γενικότερα όμως τα fault flags δεν τα διαχειρίζεται η integration πλατφόρμα. Αυτά
πρέπει να τα διαχειριστούμε σε επίπεδο εφαρμογής.</p>

<p>Σε μελλοντικές ενότητες θα μιλήσουμε και για το container μέσα στο οποίο λειτουργούν όλα τα μηνύματα και ονομάζεται
exchange. Για τώρα δεν χρειάζεται να εμβαθύνουμε τόσο στην τεχνολογία διαχείρισης μηνυμάτων από το Camel.</p>

<p>Εκείνο που ενώνει όλα τα κομμάτια μαζί και γνωρίζει τα πάντα όταν τρέχει το Apache Camel είναι το <strong>CamelContext</strong>. Είναι ο
συντονιστής όλων των routes, γνωρίζει όλα τα Components και γενικότερα είναι ο κεντρικός μηχανισμός στον οποίο
στηρίζεται η λειτουργία του Apache Camel.</p>
<img src="apache-camel-unit2/apache-camel-unit2-3.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Για να μπορέσει να λειτουργήσει ένα καινούργιο component θα πρέπει να το γνωρίζει το CamelContext. Έχουμε δημιουργήσει
ένα component εμείς τότε θα πρέπει να το δηλώσουμε στο CamelContext για να μπορέσει να το διαχειριστεί σωστά κατά την
εκτέλεση ενός route. Στο δικό μας παράδειγμα, θα χρειαστεί να δηλώσουμε το jms component που θα δημιουργήσουμε στο
CamelContext. Αυτό θα το δούμε σε λίγο όταν αρχίζουμε να χτίζουμε το project μας. Μας μένει όμως να μιλήσουμε για τα
Queues και τα Topics.</p>

<p>Στο παράδειγμα μας, θα διαβάζουμε ένα αρχείο από έναν φάκελο και το περιεχόμενο του αρχείου θα το στέλνουμε σαν μήνυμα
σε ένα JMS endpoint το οποίο στην ουσία είναι ένα εξωτερικός message broker.</p>

<p>Υπάρχουν πολλοί, αξιόλογοί και δωρεάν brokers που υπάρχουν για να χρησιμοποιηθούν για επαγγελματική χρήση. Μερικοί από
αυτοί σίγουρα θα σας είναι γνωστοί όπως Kafka, RabbitMQ, ActiveMQ και ArtemisMQ. Τι μας προσφέρει όμως ένας broker?</p>

<p>Όταν ένα σύστημα θέλει να στείλει μήνυμα σε ένα άλλο σύστημα αυτό επιτυγχάνεται με ένα ενδιάμεσο σύστημα που ονομάζεται
broker. Στην ουσία στέλνουμε το μήνυμα μας στον broker και οποιαδήποτε στιγμή ή και στιγμιαία μπορεί το άλλο σύστημα να
διαβάσει το μήνυμα που του στείλαμε και να αρχίσει μια δική του διεργασία. Το πλεονέκτημα που αποκτούμε χρησιμοποιώντας
ένα ενδιάμεσο σύστημα διαχείρισης μηνυμάτων είναι ότι μπορούμε να έχουμε ασύγχρονη επικοινωνία (asynchronous). Που όμως
αποθηκεύονται τα μηνύματα στον broker?</p>

<p>Εδώ έχουμε δύο επιλογές- Queues και Topics. Τα Queues είναι αυτό που ονομάζουμε point-to-point που σημαίνει ότι κάθε
μήνυμα που στέλνουμε θα έχει μόνο έναν παραλήπτη και από την στιγμή που θα διαβαστεί από αυτόν δεν είναι διαθέσιμο για
άλλον. Τα Topics όμως ακολουθούν το publish/subscribe μοντέλο που σημαίνει ότι ένα μήνυμα μπορεί να έχει πολλούς
παραλήπτες αρκεί αυτοί να έχουν ήδη κάνει εγγραφή στο Topic.</p>

<img src="apache-camel-unit2/apache-camel-unit2-4.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Το service το οποίο χρησιμοποιούμε για να δημιουργήσουμε, να στείλουμε, να λάβουμε και να διαβάσουμε μηνύματα είναι το
<strong>Java Message Service (JMS)</strong> Το ίδιο service μας παρέχει την δυνατότητα μέσω του <strong>ConnectionFactory</strong> να μπορούμε να
ενωθούμε σε έναν broker και να στείλουμε ή να λάβουμε μηνύματα. Νομίζω ότι είμαστε έτοιμοι με αυτή την λίγη και απλή
θεωρία που καλύψαμε να δημιουργήσουμε το project μας.</p>

<p>Για αρχή θα πρέπει να επιλέξουμε και να εγκαταστήσουμε έναν broker. Στο δικό μας παράδειγμα θα χρησιμοποιήσουμε το
ArtemisMQ <a href="https://activemq.apache.org/components/artemis/ ">
	<font color="#0000CC">(https://activemq.apache.org/components/artemis/ )</font>
</a>. Είναι η συνέχεια του ActiveMQ που πολλοί application
servers είχαν ενσωματωμένο. Το ArtemisMQ είναι η νέα επιλογή broker της Jboss για τους Application Server όπως ο
Wildfly.</p>

<img src="apache-camel-unit2/apache-camel-unit2-5.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Φυσικά το πρόγραμμα μας, αν φορτώσετε τις σωστές βιβλιοθήκες στο POM.xml αρχείο θα μπορεί να στείλει μηνύματα και σε
άλλους brokers όπως Kafka. Αυτό θα το δείξουμε σε μελλοντικές ενότητες. Για αρχή θα πρέπει πρώτα να δούμε πως
δημιουργούμε στο Camel ένα route που στέλνει μηνύματα σε έναν broker.</p>

<img src="apache-camel-unit2/apache-camel-unit2-6.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Αν έχετε Windows 10 λειτουργικό τότε η επιλογή σας είναι το zip αρχείο. Αφού κατεβάσετε το ArtemisMQ, αποσυμπιέστε το
μέσα σε έναν φάκελλο. Πηγαίνετε μέσα στο φάκελλο του bin κάντε copy το path.</p>

<img src="apache-camel-unit2/apache-camel-unit2-7.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Τώρα θα πρέπει να ανοίξετε ένα cmd terminal και να κάνετε paste το path που αντιγράψατε.</p>

<img src="apache-camel-unit2/apache-camel-unit2-8.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Το τελευταίο βήμα είναι να δημιουργήσουμε ένα δικό μας broker. Οπότε στο terminal γράφετε την εντολή <strong>artemis create
mybroker</strong> και πατάτε enter. Δώστε ένα username και password, δεχτείτε την επιλογή που επιτρέπει anonymous access και
περιμένετε λίγα δευτερόλεπτα για να ολοκληρωθεί η διαδικασία.</p>

<img src="apache-camel-unit2/apache-camel-unit2-9.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Ένα καινούργιο broker service με το όνομα mybroker έχει δημιουργηθεί μέσα στο φάκελλο bin. Μπορούμε να ξεκινήσουμε το
mybroker που μόλις δημιουργήσαμε από το cmd terminal. Πηγαίνουμε μέσα στο φάκελλο mybroker, μετά στο φάκελλο bin και
τρέχουμε την εντολή <strong>artemis.cmd run</strong>.</p>

<img src="apache-camel-unit2/apache-camel-unit2-10.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Μέτα από λίγα δευτερόλεπτα θα έχει ολοκληρωθεί η εκκίνηση του broker.</p>

<img src="apache-camel-unit2/apache-camel-unit2-11.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Κάθε φορά λοιπόν που χρειάζεστε να το ξεκινήσετε, θα πρέπει να ανοίγετε ένα cmd terminal και αφού πάτε στο bin φάκελλο
του mybroker να τρέχετε την εντολή <strong>artemis.cmd run</strong>. Για να σταματήσετε τον broker απλά πατήστε <strong>Ctrl + C</strong>.</p>

<p>Τώρα που ο broker έχει δημιουργηθεί μπορούμε να έχουμε πρόσβαση στα μηνύματα που περιέχει μέσω μιας κονσόλας που μας
παρέχει. Αν δείτε στο terminal, η τελευταία γραμμή μας πληροφορεί ότι η κονσόλα είναι διαθέσιμη στο
<strong>http://localhost:8161/console</strong>.</p>

<img src="apache-camel-unit2/apache-camel-unit2-12.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Ανοίγετε λοιπόν έναν browser και αφού γράψετε την διεύθυνση και εισάγετε το username και password θα πρέπει να σας
εμφανιστεί η παρακάτω κονσόλα.</p>

<img src="apache-camel-unit2/apache-camel-unit2-13.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Αφήστε ανοιχτή αυτή την κονσόλα. Όταν ενωθούμε σωστά με το ArtemisMQ και στείλουμε ένα μήνυμα με το Apache Camel θα
μπορέσουμε να δούμε από εδώ το Queue που δημιουργήθηκε όπως και το μήνυμα που περιέχει. Ο broker λοιπόν είναι έτοιμος.
Τώρα πρέπει να δημιουργήσουμε το project με το οποίο θα στείλουμε μήνυμα στον broker.</p>

<p>Σας προτείνω, για ευκολία χρόνου και κόπου, να μην δημιουργήσετε ένα project από την αρχή αλλά να αντιγράψετε το project
που είχαμε δημιουργήσει στην πρώτη ενότητα. Αν θέλετε να το δημιουργήσετε από την αρχή, τότε ακολουθήστε όλα τα βήματα
της <a href="https://kassapoglou.github.io/camel/apache-camel-unit1-simple-file-copy-example.html">
	<font color="#0000CC">ΕΝΟΤΗΤΑΣ 1</font>
</a>.</p>

<p>Για να μπορέσουμε να στείλουμε μηνύματα θα πρέπει πρώτα να επιλέξουμε με ποιο component θα το κάνουμε. Επειδή το Apache
Camel συνηθίζει να δημιουργεί καινούργια components σε τακτά χρονικά διαστήματα, θα πρέπει να ελέγχουμε το documention
για να είμαστε ενημερωμένοι. Αν και έχουμε αρκετές επιλογές για το project μας θα επιλέξουμε το Simple JMS
<a href="https://camel.apache.org/components/latest/sjms-component.html ">
	<font color="#0000CC">(https://camel.apache.org/components/latest/sjms-component.html )</font>
</a>.</p>

<img src="apache-camel-unit2/apache-camel-unit2-14.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Μπορείτε κάλλιστα να χρησιμοποιήσετε το simple JMS2. Το αποτέλεσμα είναι ακριβώς το ίδιο, απλά αλλάζει το dependency στο
POM.xml αρχείο.</p>

<p>Εκτός από το Simple JMS θα χρειαστούμε ακόμα ένα component που ονομάζεται direct
<a href="(https://camel.apache.org/components/latest/direct-component.html  ">
	<font color="#0000CC">(https://camel.apache.org/components/latest/direct-component.html )</font>
</a>. Αυτό το component μας είναι χρήσιμο όταν θέλουμε να
ενώσουμε δύο διαφορετικά routes σε ένα, όπως δείχνει και το παράδειγμα από το documentation του Camel.</p>

<img src="apache-camel-unit2/apache-camel-unit2-15.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<img src="apache-camel-unit2/apache-camel-unit2-16.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Πρέπει λοιπόν να προσθέσουμε κάποια dependencies στο POM.xml αρχείο έτσι ώστε να αναγνωρίσει σωστά το Apache Camel τον
κώδικα μας. Το καινούργιο POM.xml θα είναι ως εξής:</p>

<p><strong>POM.xml</strong></p>

<pre class="prettyprint"><xmp>
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<modelVersion>4.0.0</modelVersion>
	<groupId>com.example</groupId>
	<artifactId>SimpleJMS</artifactId>
	<version>1.0-SNAPSHOT</version>
	<packaging>war</packaging>

	<dependencyManagement>
		<dependencies>

			<dependency>
				<groupId>org.apache.camel</groupId>
				<artifactId>camel-bom</artifactId>
				<version>3.4.0</version>
				<type>pom</type>
				<scope>import</scope>
			</dependency>
		</dependencies>
	</dependencyManagement>

	<properties>
		<maven.compiler.target>1.8</maven.compiler.target>
		<failOnMissingWebXml>false</failOnMissingWebXml>
		<maven.compiler.source>1.8</maven.compiler.source>
		<tomee.version>8.0.3</tomee.version>
		<final.name>FileCopy</final.name>
	</properties>
	<dependencies>
		<dependency>
			<groupId>org.eclipse.microprofile</groupId>
			<artifactId>microprofile</artifactId>
			<version>2.1</version>
			<type>pom</type>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jakarta.enterprise</groupId>
			<artifactId>jakarta.enterprise.cdi-api</artifactId>
			<version>2.0.2</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-cdi</artifactId>
			<version>3.4.0</version>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-context</artifactId>
			<version>2.25.1</version>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-core</artifactId>
			<version>3.4.0</version>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-direct</artifactId>
			<version>3.4.0</version>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-sjms</artifactId>
			<version>3.4.0</version>
		</dependency>
		<dependency>
			<groupId>org.apache.activemq</groupId>
			<artifactId>artemis-jms-client</artifactId>
			<version>2.13.0</version>
		</dependency>
	</dependencies>
	<build>
		<finalName>FileCopy</finalName>
	</build>
	<profiles>
		<profile>
			<id>tomee</id>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.tomee.maven</groupId>
						<artifactId>tomee-maven-plugin</artifactId>
						<version>${tomee.version}</version>
						<executions>
							<execution>
								<id>executable-jar</id>
								<phase>package</phase>
								<goals>
									<goal>exec</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
						   <context>ROOT</context>
						   <tomeeClassifier>microprofile</tomeeClassifier>
						   <tomeeHttpPort>8080</tomeeHttpPort>
						   <tomeeShutdownPort>8005</tomeeShutdownPort>
						   <tomeeAjpPort>8009</tomeeAjpPort>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
	<name>SimpleJMS</name>
</project>

		</xmp></pre>

<p>Η κλάση μας MyRouteBuilder.java αποτελείται από τον εξής κώδικα:</p>

<p><strong>MyRouteBuilder.java</strong></p>

<pre class="prettyprint"><xmp>
package com.example.SimpleJMS;

import javax.inject.Inject;
import org.apache.activemq.artemis.jms.client.ActiveMQConnectionFactory;
import org.apache.camel.CamelContext;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.sjms.SjmsComponent;

public class MyRouteBuilder extends RouteBuilder {

@Inject
private CamelContext camel;

SjmsComponent component = new SjmsComponent();


@Override
public void configure() {
	component.setConnectionFactory(new ActiveMQConnectionFactory("tcp://localhost:61616"));
	camel.addComponent("sjms", component);

	from("file:C:\\testdata1").to("direct:start");
	from("file:C:\\testdata2").to("direct:start");

	from("direct:start").to("sjms:queue:myqueue");
	}
}
		</xmp></pre>

<p>Ας δούμε λοιπόν τι ακριβώς προσπαθούμε να κάνουμε με αυτό τον απλό κώδικα.</p>

<p>Για αρχή, θα χρειαστούμε να κάνουμε inject ένα αντικείμενο CamelContext. Όπως έχουμε πει ήδη στην θεωρία μας, το
CamelContext είναι αυτό που ενώνει όλα τα components μαζί και βάζει σε λειτουργία τα routes. Το camel αντικείμενο θα το
χρειαστούμε λίγο αργότερα στον κώδικα.</p>

<p>Αμέσως μετά δημιουργούμε ένα αντικείμενο είδος SjmsComponent και το ονομάζουμε component. Αυτό είναι το component που
επιλέξαμε για να ενωθούμε. Όμως δεν γνωρίζει που ακριβώς θα πρέπει να στείλει το μήνυμα. Για αυτό λοιπόν χρησιμοποιούμε
την setConnectionFactory μέθοδο και ορίζουμε ότι θα δημιουργήσουμε ένα καινούργιο connection στο ArtemisMQ ( αυτό
γίνεται με το new ActiveMQConnectionFactory) στην διεύθυνση tcp://localhost:61616. Η πόρτα 61616 είναι η standard πόρτα
με την οποία επικοινωνεί το ArtemisMQ.</p>

<p>Μέσα στον κώδικα μας θα πρέπει να καλέσουμε τώρα αυτό το νέο SjmsComponent που δημιουργήσαμε και ρυθμίσαμε. Για να το
καλέσουμε θα πρέπει να του δώσουμε ένα όνομα. Ταυτόχρονα θα πρέπει να το γνωρίζει και το ίδιο το Camel για να μπορεί να
το χρησιμοποιήσει. Εδώ λοιπόν είναι που χρειαζόμαστε το camel αντικείμενο που κάναμε inject στην αρχή του κώδικα.
Δηλώνουμε λοιπόν το component με όνομα sjms στο ContextCamel.</p>

<p>Είμαστε έτοιμοι να δημιουργήσουμε τα routes. Για να δείξουμε την χρησιμότητα του direct component δημιούργησα τρία
routes. Τα δύο πρώτα διαβάζουν ένα αρχείο από τους φακέλλους testdata1 και testdata2 αντίστοιχα και στέλνουν τα δεδομένα
τους σε ένα direct endpoint που ονομάζεται start. Στην ουσία και τα δύο routes στέλνουν τα δεδομένα τους σε ένα κοινό
endpoint.</p>

<p>Το τρίτο route ορίζει τον consumer, δηλαδή ορίζει το endpoint που τα άλλα δύο στέλνουν τα δεδομένα τους. Θα πρέπει το
όνομα να είναι ακριβώς το ίδιο. Το direct endpoint λειτουργεί με σύγχρονη (synchronous) επικοινωνία οπότε δεν υπάρχει
καθυστέρηση από το ένα route στο άλλο.</p>

<p>Αφού λοιπόν το direct component δεχτεί τα δεδομένα, τα στέλνει στο sjms component. Επίσης, ορίζουμε ότι θα δημιουργηθεί
και ένα καινούργιο queue στον broker με το όνομα myqueue σε περίπτωση που δεν υπάρχει ήδη. Επειδή ορίσαμε σωστά το
connection με το broker και το δηλώσαμε στο CamelContext τότε το route θα στείλει το μήνυμα στο ArtemisMQ και μάλιστα θα
δημιουργήσει ένα καινούργιο queue με το όνομα myqueue.</p>

<p>Αφού κάνετε <strong>mvn clean install</strong> στο project, τρέξτε την εντολή <strong>mvn tomee:run</strong> για να ξεκινήσει ο tomee. Όταν είναι έτοιμος
ο application server, δημιουργήστε ένα απλό txt αρχείο το οποίο περιέχει μέσα το όνομα σας, και τοποθετήστε στο
testdata1 (ή testdata2).</p>

<img src="apache-camel-unit2/apache-camel-unit2-17.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<p>Αν πάμε τώρα στην κονσόλα του ArtemisMQ θα δούμε ότι έχει δημιουργηθεί ένα καινούργιο queue με το όνομα myqueue. Αν
ανοίξετε το myqueue, αριστερά θα σας εμφανιστεί μια λίστα με όλα τα μηνύματα. Πατώντας επάνω στο message ID αριθμό
μπορείτε να δείτε το περιεχόμενο του μηνύματος.</p>

<img src="apache-camel-unit2/apache-camel-unit2-18.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>

<img src="apache-camel-unit2/apache-camel-unit2-19.jpg" alt="Δωρεάν Μαθήματα και Σεμινάρια Apache Camel" class="center">
<p></p>


<!-- ###################################################################################################-->												
									
						
								</div>
							</div>
						</div>
									<center><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="GQD77W6K672RA" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_GR/i/scr/pixel.gif" width="1" height="1" />
</form></center>
						<!--<div class="row row-pb-lg animate-box">
							<div class="col-md-12">
								<h2 class="colorlib-heading-2">23 Comments</h2>
								<div class="review">
						   		<div class="user-img" style="background-image: url(images/person1.jpg)"></div>
						   		<div class="desc">
						   			<h4>
						   				<span class="text-left">Jacob Webb</span>
						   				<span class="text-right">24 March 2018</span>
						   			</h4>
						   			<p>When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrov</p>
						   			<p class="star">
					   					<span class="text-left"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
						   			</p>
						   		</div>
						   	</div>
						   	<div class="review">
						   		<div class="user-img" style="background-image: url(images/person2.jpg)"></div>
						   		<div class="desc">
						   			<h4>
						   				<span class="text-left">Jacob Webb</span>
						   				<span class="text-right">24 March 2018</span>
						   			</h4>
						   			<p>When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrov</p>
						   			<p class="star">
					   					<span class="text-left"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
						   			</p>
						   		</div>
						   	</div>
						   	<div class="review">
						   		<div class="user-img" style="background-image: url(images/person3.jpg)"></div>
						   		<div class="desc">
						   			<h4>
						   				<span class="text-left">Jacob Webb</span>
						   				<span class="text-right">24 March 2018</span>
						   			</h4>
						   			<p>When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrov</p>
						   			<p class="star">
					   					<span class="text-left"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
						   			</p>
						   		</div>
						   	</div>
							</div>
						</div>-->

						<!--<div class="row animate-box">
							<div class="col-md-12">
								<h2 class="colorlib-heading-2">Say something</h2>
								<form action="#">
									<div class="row form-group">
										<div class="col-md-6">
											<!-- <label for="fname">First Name</label> -->
						<!--		<input type="text" id="fname" class="form-control" placeholder="Your firstname">
										</div>
										<div class="col-md-6">
											<!-- <label for="lname">Last Name</label> -->
						<!--<input type="text" id="lname" class="form-control" placeholder="Your lastname">
										</div>
									</div>

									<div class="row form-group">
										<div class="col-md-12">
											<!-- <label for="email">Email</label> -->
						<!--<input type="text" id="email" class="form-control" placeholder="Your email address">
										</div>
									</div>

									<div class="row form-group">
										<div class="col-md-12">
											<!-- <label for="subject">Subject</label> -->
						<!--<input type="text" id="subject" class="form-control" placeholder="Your subject of this message">
										</div>
									</div>

									<div class="row form-group">
										<div class="col-md-12">
											<!-- <label for="message">Message</label> -->
						<!--	<textarea name="message" id="message" cols="30" rows="10" class="form-control" placeholder="Say something about us"></textarea>
										</div>
									</div>
									<div class="form-group">
										<input type="submit" value="Post Comment" class="btn btn-primary">
									</div>
								</form>	
							</div>
						</div> -->
					</div>
				</div>
			</div>
		</div>

		<!--<div id="colorlib-subscribe" class="subs-img" style="background-image: url(images/img_bg_2.jpg);" data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 text-center colorlib-heading animate-box">
						<h2>Subscribe Newsletter</h2>
						<p>Subscribe our newsletter and get latest update</p>
					</div>
				</div>
				<div class="row animate-box">
					<div class="col-md-6 col-md-offset-3">
						<div class="row">
							<div class="col-md-12">
							<form class="form-inline qbstp-header-subscribe">
								<div class="col-three-forth">
									<div class="form-group">
										<input type="text" class="form-control" id="email" placeholder="Enter your email">
									</div>
								</div>
								<div class="col-one-third">
									<div class="form-group">
										<button type="submit" class="btn btn-primary">Subscribe Now</button>
									</div>
								</div>
							</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>-->
		<footer id="colorlib-footer">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col-md-3 colorlib-widget">
						<h4>PURPOSE</h4>
						<p>Ο πρωταρχικός λόγος που με ώθησε στο να δημιουργήσω αυτή την
							ιστοσελίδα και να προσφέρω δωρεάν μαθήματα είναι γιατί πιστεύω ότι
							η γνώση, σε οποιοδήποτε επίπεδο, πρέπει να μεταδίδεται για να έχει αξία.</p>
						<p>
						<ul class="colorlib-social-icons">
							<!--<li><a href="#"><i class="icon-twitter"></i></a></li>-->
							<li><a href="https://www.facebook.com/kassapoglou/?ref=bookmarks"><i
									class="icon-facebook"></i></a></li>
							<li><a href="https://www.linkedin.com/groups/4390739/"><i
									class="icon-linkedin"></i></a></li>
							<!--<li><a href="#"><i class="icon-dribbble"></i></a></li>-->
						</ul>
						</p>
					</div>
					<div class="col-md-3 colorlib-widget">
						<h4>Quick Links</h4>
						<p>
						<ul class="colorlib-footer-links">
							<!--<li><a href="#"><i class="icon-check"></i> About</a></li>-->
							<!--<li><a href="#"><i class="icon-check"></i> Testimonials</a></li>-->
							<li><a href="https://kassapoglou.github.io/main/"><i class="icon-check"></i>
								Home</a></li>
							<li><a href="https://kassapoglou.github.io/camel/apache-camel-programming.html"><i
									class="icon-check"></i> APACHE CAMEL Programming</a></li>
							<li><a href="https://kassapoglou.github.io/main/courses.html"><i
									class="icon-check"></i> Courses</a></li>
							<!--<li><a href="#"><i class="icon-check"></i> Event</a></li>
                        <li><a href="#"><i class="icon-check"></i> News</a></li>-->
							<li><a href="https://kassapoglou.github.io/main/contact.html"><i
									class="icon-check"></i> Contact</a></li>
						</ul>
						</p>
					</div>

					<!--<div class="col-md-3 colorlib-widget">
                    <h4>Recent Post</h4>
                    <div class="f-blog">
                        <a href="blog.html" class="blog-img" style="background-image: url(images/blog-1.jpg);">
                        </a>
                        <div class="desc">
                            <h2><a href="blog.html">Creating Mobile Apps</a></h2>
                            <p class="admin"><span>18 April 2018</span></p>
                        </div>
                    </div>
                    <div class="f-blog">
                        <a href="blog.html" class="blog-img" style="background-image: url(images/blog-2.jpg);">
                        </a>
                        <div class="desc">
                            <h2><a href="blog.html">Creating Mobile Apps</a></h2>
                            <p class="admin"><span>18 April 2018</span></p>
                        </div>
                    </div>
                    <div class="f-blog">
                        <a href="blog.html" class="blog-img" style="background-image: url(images/blog-3.jpg);">
                        </a>
                        <div class="desc">
                            <h2><a href="blog.html">Creating Mobile Apps</a></h2>
                            <p class="admin"><span>18 April 2018</span></p>
                        </div>
                    </div>
                </div> -->

					<div class="col-md-3 colorlib-widget">
						<h4>Contact Info</h4>
						<ul class="colorlib-footer-links">

							<li><a href="tel://6976434707"><i class="icon-phone"></i> 6976434707</a></li>
							<li><a href="mailto:michail.kassapoglou@gmail.com"><i class="icon-envelope"></i>
								michail.kassapoglou@gmail.com</a></li>
							<li><a href="kassapoglou.github.io/main"><i class="icon-location4"></i>
								kassapoglou.github.io/main</a></li>
							<li><a href="https://www.facebook.com/kassapoglou/?ref=bookmarks"><i
									class="icon-facebook2"></i> Facebook</a></li>
							<li><a href="https://www.linkedin.com/groups/4390739/"><i class="icon-linkedin"></i>
								Linkedin</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="copy">
				<div class="container">
					<div class="row">
						<div class="col-md-12 text-center">
							<p>
								<small class="block">&copy;
									<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
									Copyright &copy;<script>
										document.write(new Date().getFullYear());
									</script> All rights reserved | This template is made with <i class="icon-heart"
																								  aria-hidden="true"></i> by <a href="https://colorlib.com"
																																target="_blank">Colorlib</a>
									<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								</small><br>
								<small class="block">Demo Images: <a href="http://unsplash.co/"
																	 target="_blank">Unsplash</a>, <a href="http://pexels.com/"
																									  target="_blank">Pexels</a></small>
							</p>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
	</div>

	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Counters -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>

</body>

</html></html>