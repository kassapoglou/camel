<!DOCTYPE html>
<html lang="en">
<head>
    <title>Μαθαίνω Apache Camel</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- FontAwesome CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!-- ElegantFonts CSS -->
    <link rel="stylesheet" href="css/elegant-fonts.css">

    <!-- themify-icons CSS -->
    <link rel="stylesheet" href="css/themify-icons.css">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="css/swiper.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="camel_style.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150900548-1"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150900548-1');
</script>

</head>
<body class="single-blog-post">
    <div class="page-header">
           <header class="site-header">
            <div class="top-header-bar">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 col-lg-6 d-none d-md-flex flex-wrap justify-content-center justify-content-lg-start mb-3 mb-lg-0">
                            <div class="header-bar-email d-flex align-items-center">
                                <i class="fa fa-envelope"></i><a href="#">michail.kassapoglou@gmail.com</a>
                            </div><!-- .header-bar-email -->

                            <div class="header-bar-text lg-flex align-items-center">
                              <!--  <p><i class="fa fa-phone"></i>001-1234-88888 </p> -->
                            </div><!-- .header-bar-text -->
                        </div><!-- .col -->

                        <div class="col-12 col-lg-6 d-flex flex-wrap justify-content-center justify-content-lg-end align-items-center">
                            <div class="header-bar-search">
                                <form class="flex align-items-stretch">
                                 <!--   <input type="search" placeholder="What would you like to learn?"> -->
                                 <!--   <button type="submit" value="" class="flex justify-content-center align-items-center"><i class="fa fa-search"></i></button> -->
                                </form>
                            </div><!-- .header-bar-search -->

                            <div class="header-bar-menu">
                                <ul class="flex justify-content-center align-items-center py-2 pt-md-0">
                                  <!--  <li><a href="#">Register</a></li> -->
                                <!--    <li><a href="#">Login</a></li> -->
                                </ul>
                            </div><!-- .header-bar-menu -->
                        </div><!-- .col -->
                    </div><!-- .row -->
                 </div>   <!-- .container-fluid -->
            </div><!-- .top-header-bar -->

            <div class="nav-bar">
                <div class="container">
                    <div class="row">
                        <div class="col-9 col-lg-3">
                            <div class="site-branding">
                                <h1 class="site-title"><a href="https://kassapoglou.github.io/main/" rel="home">Kassa<span>poglou</span></a></h1>
                            </div><!-- .site-branding -->
                        </div><!-- .col -->

                        <div class="col-3 col-lg-9 flex justify-content-end align-content-center">
                            <nav class="site-navigation flex justify-content-end align-items-center">
                                <ul class="flex flex-column flex-lg-row justify-content-lg-end align-content-center">
                                    <li class="current-menu-item"><a href="index.html">Home</a></li>
                              <!-- <li><a href="https://kassapoglou.github.io/main/forum.html">Forum</a></li> -->
                                    <li><a href="https://kassapoglou.github.io/main/contact.html">Contact</a></li>
                                </ul>

                                <div class="hamburger-menu d-lg-none">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div><!-- .hamburger-menu -->

                               
                            </nav><!-- .site-navigation -->
                        </div><!-- .col -->
                    </div><!-- .row -->
                </div><!-- .container -->
            </div><!-- .nav-bar -->
        </header><!-- .site-header -->

        <div class="page-header-overlay">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <header class="entry-header">
                            <h1 class="entry-title">ΕΝΟΤΗΤΑ 1 Apache Camel - Simple File Copy Example and Environment Setup</h1>

                            <div class="entry-meta flex justify-content-center align-items-center">
                                <div class="post-author"><a href="#">Michail Kassapoglou </a></div>

                              <!--  <div class="post-comments"><a href="#">02 Comments</a></div> -->
                            </div><!-- .entry-meta -->
                        </header><!-- .entry-header -->
                    </div><!-- .col -->
                </div><!-- .row -->
            </div><!-- .container -->
        </div><!-- .page-header-overlay -->
    </div><!-- .page-header -->

    <div class="container">
        <div class="row">
            <div class="col-12 offset-lg-1 col-lg-10">
                <div class="featured-image">
                  <!--  <img src="images/single-post.jpg" alt=""> -->

                    <div class="posted-date position-absolute">
                        <div class="day">13</div>
                        <div class="month">Dec</div>
                    </div><!-- .posted-date -->
                </div><!-- .featured-image -->
            </div><!-- .col -->
        </div><!-- .row -->

        <div class="row">
            <div class="col-12 offset-lg-1 col-lg-1" style="height:0">
                <div class="post-share">
                   

                  
                </div><!-- .post-share -->
            </div><!-- .col -->

            <div class="col-12 col-lg-12">
                <div class="single-post-wrap">
                    
                    <p>Από την σημερινή δωρεάν ενότητα στο Quarkus ξεκινάμε μια σειρά 
                        μαθημάτων τα οποία θα καλύψουν θέματα από system integration
                        μέχρι microservices. Θα πρέπει να έχετε παρακολουθήσει κάποιο 
                        σεμινάριο στην Java ή να έχετε διαβάσει τις ενότητες 
                        στο <a href="https://kassapoglou.github.io/java/java-programming.html">
                            <font color="#0000CC">https://kassapoglou.github.io/java/java-programming.html</font> </a>
                        για να μπορέσετε να ακολουθήσετε τα μαθήματα. Τα παραδείγματα 
                        θα είναι απλά και θα ακολουθούνται από αρκετή θεωρία όπως άλλωστε
                        είναι και η λογική αυτού του site. Ας ξεκινήσουμε λοιπόν.</p>
                    
                    <p>Το πιο κοινό σενάριο όταν αναλαμβάνεται την δημιουργία κώδικα 
                        σε enterprise συστήματα είναι να καταφέρετε να ενώσετε την 
                        καινούργια εφαρμογή που δημιουργείται με υπάρχοντα συστήματα. 
                        Αυτό σε τεχνική ορολογία ονομάζεται system integration. Η πιο
                        πιθανή σας προσέγγιση δεν θα είναι να κατανοήσετε την λειτουργία
                        του συστήματος που υπάρχει ήδη αλλά πως θα μπορέσετε πετυχημένα 
                        να ανταλλάξετε δεδομένα μαζί του. Δεν θα ήταν καθόλου συνετό, 
                        (αν και δεν είναι ακατόρθωτο) να δημιουργήσετε από το μηδέν τον 
                        κώδικα που ενοποιεί τα συστήματα, γιατί θα ήταν μια δαπανηρή προσπάθεια
                        και μπορεί και να μην είχε και απόλυτη επιτυχία. Η καλύτερη σας επιλογή
                        θα ήταν να ψάξετε για ένα έτοιμο framework που μπορεί να σας προσφέρει
                        με τον ελάχιστο δυνατόν κώδικα τις υπηρεσίες που ζητάτε. Αυτό το
                        framework ονομάζεται Apache Camel και είναι πολύ γνωστό ανάμεσα 
                        στους προγραμματιστές για τις δυνατότητες του.</p>
                    
                    <p>Το Camel framework στηρίζεται σε έναν μηχανισμό δρομολόγησης 
                        (routing engine builder) ο οποίος αφού διαβάσει τα δεδομένα 
                        από κάποιο προκαθορισμένο σημείο, τα επεξεργάζεται και αποφασίζει
                        σε ποιον προορισμό ή προορισμούς να στείλει με βάση τους κανόνες
                        δρομολόγησης που του έχουμε ορίσει. Η γλώσσα στην οποία 
                        στηρίζεται το Camel framework για να ορίσει τους κανόνες δρομολόγησης
                        ονομάζεται DSL (Domain-specific language) και είναι πολύ απλή
                        και στηρίζεται στην λογική των business processes.</p>
                    
                    <p>Μια από τις θεμελιώδεις αρχές του Camel είναι ότι δεν απαιτεί 
                        να μετατραπούν τα δεδομένα σε κάποια συγκεκριμένη μορφή για
                        να μπορέσει να τα επεξεργαστεί και να αποφασίσει την δρομολόγησή τους.
                        Αυτό επιτρέπει στο Camel να μπορεί να χρησιμοποιήσει το ίδιο API 
                        ανεξάρτητα από το πρωτόκολλο ή τον τύπο δεδομένων που χρησιμοποιούνται
                        σε κάποιο σύστημα. Μέχρι τώρα, το Camel προσφέρει συμβατότητα με 
                        περισσότερα από 280 πρωτόκολλα και τύποι δεδομένων. Πως όμως 
                        δημιουργούμε ένα απλό Camel Route?</p>
                    
                    <p>Βασικά, πριν ξεκινήσουμε να δημιουργήσουμε τον πρώτο μας route, 
                        θα πρέπει να αναφέρουμε τι εργαλεία χρειαζόμαστε για να μπορέσουνε 
                        να αναπτύξουμε τα προγράμματα μας.</p>
                    
                    <p><strong>1.</strong> Χρειάζεται να έχετε εγκαταστήσει Java 1.8 στον υπολογιστή σας</p>
                    <p><strong>2.</strong> Είναι απαραίτητο κάποιο μοντέρνο IDE. Στα δικά μας 
                        παραδείγματα θα χρησιμοποιήσω την δωρεάν έκδοση του IntelliJ (Community Edition).</p>
                    <p><strong>3.</strong> Όλα μας τα project θα χρησιμοποιήσουν Maven. Μπορείτε 
                        να χρησιμοποιήσετε το ήδη ενσωματωμένο στο IntelliJ Maven ή να 
                        ενσωματώσετε την δική σας έκδοση.</p>
                    <p><strong>4.</strong> Θα χρησιμοποιήσουμε το Quarkus σαν πλατφόρμα 
                        ανάπτυξης των προγραμμάτων μας. Αργότερα θα αναπτύξουμε 
                        και microservices σε αυτή την πλατφόρμα.</p>
                    
                    <p>Σαν πρώτο βήμα, πηγαίνουμε στο <a href="https://code.quarkus.io/">
                            <font color="#0000CC">https://code.quarkus.io/</font> </a> όπου 
                        μπορούμε να δημιουργήσουμε ένα project με τις απαραίτητες
                        βιβλιοθήκες αρκεί να τις επιλέξουμε. Για αρχή, ας αλλάξουμε 
                        (επάνω αριστερά) το όνομα του Group και του Artifact. Εννοείτε
                        ότι μπορείτε να δώσετε ότι ονόματα θέλετε.</p>
                    
                     <img src="apache-camel-unit1/apache-camel-unit1-1.jpg" alt="" class="center"><p></p>
                    
                     <p>Έπειτα, πηγαίνετε στην λίστα με τις βιβλιοθήκες και κάτω από 
                         την κατηγορία Integration επιλέγετε το Camel Quarkus
                         Core και Camel Quarkus File.</p>
                     
                     <img src="apache-camel-unit1/apache-camel-unit1-2.jpg" alt="" class="center"><p></p>
                    
                     <p>Τώρα πατήστε στο κουμπί “Generate your application”. Αυτό θα σας 
                         ετοιμάσει και θα σας κατεβάσει στον υπολογιστή σας ένα έτοιμο 
                         Maven project σε zip μορφή.</p>
                     
                     <img src="apache-camel-unit1/apache-camel-unit1-3.jpg" alt="" class="center"><p></p>
                     
                     <p>Αφού κατεβάσετε το αρχείο, βρείτε το φάκελο στον οποίο έχει
                         αποθηκευτεί και αποσυμπιέστε το. Τώρα μπορείτε να ξεκινήσετε 
                         το IntelliJ. Πηγαίνετε στο File → Open και βρείτε το φάκελο
                         με το maven project που κάνατε unzip.</p>
                     
                     <img src="apache-camel-unit1/apache-camel-unit1-4.jpg" alt="" class="center"><p></p>
                     
                     <p>Το αρχείο ExampleResource δεν μας χρειάζεται. Αυτό είναι ένα απλό
                         παράδειγμα REST web service. Διαγράφουμε λοιπόν την κλάση ExampleResource 
                         και δημιουργούμε μια δική μας κλάση με το όνομα MyRoutes που περιέχει τον εξής κώδικα:</p>
                     
                                      <p><strong>MyRoutes.java</strong></p>
                     <pre class="prettyprint">
<xmp>
package com.mycompany;

import org.apache.camel.builder.RouteBuilder;

public class MyRoutes extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        from("file:E:\\testdata1?noop=true").to("file:E:\\testdata2");
    }
}
</xmp></pre>
                    <img src="apache-camel-unit1/apache-camel-unit1-5.jpg" alt="" class="center"><p></p>                  
                    
                    <p>Πριν προχωρήσουμε να κάνουμε build το project με το Maven και να 
                        το τρέξουμε, ας δούμε λίγο τι έχουμε γράψει σαν κώδικα.</p>
                    
                    <p>Για να μπορέσει μια κλάση να χρησιμοποιήσει τον μηχανισμό δρομολόγησης
                        του Camel θα πρέπει να κληρονομεί από την κλάση RouteBuilder.
                        Αυτή η κληρονομικότητα μας αναγκάζει να γράψουμε κώδικα για μία
                        και μοναδική μέθοδο που περιέχει η RouteBuilder κλάση και ονομάζεται 
                        configure( ). Μέσα στην μέθοδο configure( ), με την χρήση της DSL
                        γλώσσας μπορούμε να ορίσουμε από που θα διαβάζουμε τα μηνύματα και
                        που θα τα στέλνουμε. Το route ξεκινάει πάντα με την λέξη from και
                        μετά ακολουθούν όσα to χρειαζόμαστε μέχρι να ορίσουμε όλο το route.
                        Στο παράδειγμά μας, το route είναι απλό, οπότε μεταφέρουμε ένα αρχείο 
                        από έναν φάκελο σε έναν άλλο φάκελο. To noop=true δίνει την ιδιότητα 
                        στο αρχείο να μην διαγραφεί από τον πρώτο φάκελλο, αλλά να αντιγραφεί
                        και το αντίγραφό του είναι εκείνο που θα μεταφερθεί στον δεύτερο φάκελο.</p>
                    
                    <p>Το παράδειγμα δείχνει σε φακέλους που ήδη υπάρχουν στον δικό μου
                        σκληρό δίσκο. Θα πρέπει να αλλάξετε το path να δείχνει σε 
                        τοπικούς φακέλους στον υπολογιστή σας.</p>
                    
                    <p>Τώρα όσο αφορά το file αυτό στο Camel ονομάζεται
                        endpoint γιατί είναι το σημείο όπου μπορούμε ή να 
                        στείλουμε ή να λάβουμε μηνύματα. Κάθε endpoint έχει
                        πάρα πολλές ιδιότητες για αυτό και ο καλύτερος σας 
                        οδηγός σε αυτό είναι το documentation
                        <a href="https://camel.apache.org/components/latest/file-component.html">
                            <font color="#0000CC">https://camel.apache.org/components/latest/file-component.html</font> </a>. 
                        Εμείς, στο παράδειγμα, χρησιμοποιήσαμε την απλή ιδιότητα noop.</p>
                    
                     <img src="apache-camel-unit1/apache-camel-unit1-6.jpg" alt="" class="center"><p></p>  
                     
                     <p>Έχουμε αρκετή θεωρία να καλύψουμε στις επόμενες ενότητες αλλά
                         για τώρα νομίζω είμαστε σε ικανοποιητικό επίπεδο κατανόησης του 
                         route και πως λειτουργεί το απλό πρόγραμμα μας. Ας το δούμε λοιπόν 
                         στην πράξη.</p>
                     
                     <p>Πατήστε (δεξιά επάνω) το Maven κουμπί και μετά το εικονίδιο με το check mark.</p>
                     
                     <img src="apache-camel-unit1/apache-camel-unit1-7.jpg" alt="" class="center"><p></p>  
                     
                     <p>Στο παράθυρο που ανοίγει δίνουμε την εντολή mvn quarkus:dev και πατάμε ENTER να ξεκινήσει το project μας.</p>
                     
                          <img src="apache-camel-unit1/apache-camel-unit1-8.jpg" alt="" class="center"><p></p>  
                          
                          <p>Όταν δείτε το δείτε το μήνυμα installed features τότε το project τρέχει και μπορούμε να δοκιμάσουμε την μεταφορά αρχείων.</p>
                          
                          <img src="apache-camel-unit1/apache-camel-unit1-9.jpg" alt="" class="center"><p></p> 
                          
                          <p>Δημιουργήστε ένα απλό txt αρχείο και πετάξτε το μέσα στον πρώτο φάκελο. 
                              Αμέσως θα ενεργοποιηθεί το route του Camel και θα το μεταφέρει στον 
                              δεύτερο φάκελο. Αργότερα θα βάλουμε και απλά logs components στα routes
                              για να μπορέσουμε να παρακολουθούμε το αποτέλεσμα και από την κονσόλα του Quarkus.</p>
                          
                          <p>Από την πιο πάνω αντίδραση του προγράμματος, είναι εύκολο
                              να καταλάβουμε ότι υπάρχει εσωτερικά στο Camel ένας 
                              routing μηχανισμός που, αφού επιλέξει σε ποιο μήνυμα 
                              θα ενεργήσει με βάση τα κριτήρια που έχουμε θέσει, ενεργοποιείται 
                              και πράττει επάνω σε αυτό. Ο μηχανισμός του Route είναι συνδυασμός
                              δύο πραγμάτων: <strong>(α)</strong> μια domain-specific γλώσσα προγραμματισμού και <strong>(β)</strong>
                              υλοποίηση συγκεκριμένων enterprise integration patterns.</p>
                          
                          <p>Η Camel domain-specific language (DSL) προσφέρει την
                              ευελιξία να γραφτεί χρησιμοποιώντας διάφορες γλώσσες 
                              προγραμματισμού όπως Java, Scala, κτλ. Ο κύριος σκοπός ύπαρξης της 
                              DSL είναι να μπορεί να ελευθερώνει τον προγραμματιστή από την γλώσσα 
                              προγραμματισμού (κάνοντας την πιο εύκολη στην σύνταξη) έτσι ώστε να 
                              μπορεί ο προγραμματιστής να συγκεντρωθεί στην πρακτική λύση του εκάστοτε
                              προβλήματος που συνήθως είναι integration πρόβλημα. Όπως ήδη είδαμε στο
                              παράδειγμα, με την Java και με απλές εντολές όπως from και to μπορέσαμε 
                              να ορίσουμε ένα ολοκληρωμένο route.</p>
                          
                          <p>Τώρα για να καταλάβουμε λίγο καλύτερα τα Enterprise Integration Patterns 
                              (EIP), καλό θα ήταν ρίξουμε μια γρήγορη ματιά στο εξής
                              site: <a href="https://camel.apache.org/manual/latest/enterprise-integration-patterns.html">
                            <font color="#0000CC">https://camel.apache.org/manual/latest/enterprise-integration-patterns.html</font> </a>.  
                              Αν κάνετε κλικ σε κάποιο από τα Patterns, θα δείτε ένα διάγραμμα και ένα δείγμα κώδικα που 
                              το ακολουθεί. Σε μελλοντικές ενότητες θα αναφέρουμε σε ποια EIPs αναφερόμαστε κάθε φορά στα 
                              παραδείγματα μας. </p>
                          
                           <img src="apache-camel-unit1/apache-camel-unit1-10.jpg" alt="" class="center"><p></p> 


            
 <!-- -----------------------------------------------------------------------------   -->
           

                <div class="author-box">
                    <div class="author-info flex flex-wrap">
                        <div class="author-avatar">
                            <img src="images/michail.jpg" alt="">

                           
                        </div><!-- .author-avatar -->

                        <div class="author-details">
                            <h3 class="author-name">Michail Kassapoglou <span>Admin</span></h3>

                            <div class="entry-content mt-3">
                                <p>Γεια σας, είμαι ο Μιχάλης Κασάπογλου και θα σας διδάξω με τον ποιο απλό 
                                  τρόπο να προγραμματίζετε σε Apache Camel. Ασχολούμαι με την τεχνική εκπαίδευση 
                                    σε διάφορες πλατφόρμες, λειτουργικά συστήματα και γλώσσες προγραμματισμού 
                                    πάνω από 20 έτη. Κατέχω έναν αρκετά μεγάλο αριθμό πιστοποιήσεων Microsoft και Oracle 
                                    και σαν Τraining Lead στην Intrasoft έχω την δυνατότητα να αναβαθμίζω συνεχώς 
                                    τις γνώσεις μου και να έχω άμεση επαφή με αληθινά projects και εξειδικευμένες μεθόδους 
                                    ανάπτυξης εφαρμογών που έχουν υψηλές απαιτήσεις.  
                                    Για τυχόν ερωτήσεις σας μπορείτε να επικοινωνήσετε μαζί μου 
                                    στο <font color="#0000CC">Michail.Kassapoglou@gmail.com </font></p>
                             <p>   Σας ευχαριστώ που επισκεφτήκατε την ιστοσελίδα μου.</p>
                            </div><!-- .entry-content -->
                        </div><!-- .author-details -->
                    </div><!-- .author-info -->
                </div><!-- .author-box -->

                
            </div><!-- .col -->
        </div><!-- .row -->
    </div><!-- .container -->

 

  

    <script type='text/javascript' src='js/jquery.js'></script>
    <script type='text/javascript' src='js/swiper.min.js'></script>
    <script type='text/javascript' src='js/masonry.pkgd.min.js'></script>
    <script type='text/javascript' src='js/jquery.collapsible.min.js'></script>
    <script type='text/javascript' src='js/custom.js'></script>

</body>
</html>
